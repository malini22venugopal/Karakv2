<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>कारक प्रश्नावली</title>
<style>
body { font-family:'Noto Sans Devanagari',Arial,sans-serif; background:#f4f9ff; padding:20px; text-align:center; }
h1 { color:#2a4d69; }
#scoreBoard { font-size:20px; margin:15px 0; font-weight:bold; color:#d35400; }
.question { background:#fff; border-radius:10px; padding:15px; margin:10px auto; box-shadow:0 4px 8px rgba(0,0,0,0.1); max-width:650px; text-align:left; }
select { padding:5px; font-size:16px; margin:0 4px; }
button { background:#2a9d8f; color:#fff; border:none; padding:12px 20px; border-radius:8px; font-size:16px; cursor:pointer; margin-top:15px; }
button:hover { background:#21867a; }
#result { margin-top:20px; padding:15px; background:#fff3cd; border-radius:10px; display:none; text-align:left; white-space:pre-wrap; }
.star,.clap,.angry { position:fixed; font-size:24px; pointer-events:none; animation:float 6s linear forwards; }
.star { color:gold; } .clap { color:orange; } .angry { color:red; }
@keyframes float { from{transform:translate(0,0) rotate(0deg);opacity:1;} to{transform:translate(var(--x),var(--y)) rotate(720deg);opacity:0;} }
#modeSelect,#passwordDiv { margin:20px auto; }
</style>
</head>
<body>
<h1>कारक प्रश्नावली</h1>

<div id="modeSelect">
  <button onclick="selectMode('student')">Student Mode</button>
  <button onclick="selectMode('teacher')">Teacher Mode</button>
</div>

<div id="passwordDiv" style="display:none;">
  Enter Teacher Password: <input type="password" id="passwordInput">
  <button onclick="checkPassword()">Submit</button>
</div>

<div id="quizDiv" style="display:none;">
  <div id="scoreBoard">आपका स्कोर यहाँ दिखेगा</div>
  <div id="quiz"></div>
  <button onclick="submitQuiz()">जमा करें</button>
  <div id="result"></div>
  <button onclick="sendEmail()" id="emailBtn" style="margin-top:10px;">Send Score & Report to Mail</button>
</div>

<script>
let teacherMode=false;

const options=["ने","के","की","से","को","में","का","पर","हे","अरे","वाह"];

let questions=[
{ text:"राम ______ पिता ______ मृत्यु हो गई।", eng:"Ram's father passed away.", answers:["के","की"], explanation:"राम के पिता (Ram's father), पिता की मृत्यु (father's death). Both show possession (संबंध कारक)." },
{ text:"चोर ______ हथौड़े ______ ताला तोड़ा।", eng:"The thief broke the lock with a hammer.", answers:["ने","से"], explanation:"चोर ने (The thief) - doer. हथौड़े से (with hammer) - instrument (करण)." },
{ text:"बीना ______ सोने ______ चूड़ियाँ चोरी हो गईं।", eng:"Bina's gold bangles were stolen.", answers:["की","की"], explanation:"बीना की चूड़ियाँ, सोने की चूड़ियाँ. Both show possession (संबंध)." },
{ text:"राहुल ______ रोहन ______ घर जाने ______ माँ ______ मना किया।", eng:"Mother forbade Rahul from going to Rohan's house.", answers:["का","के","से","ने"], explanation:"राहुल का (Rahul as object), रोहन के घर (Rohan’s house), घर जाने से (from going), माँ ने (mother as doer)." },
{ text:"दिल्ली ______ आगरा ______ जाने वाली ट्रेन ______ लुटमार हो गई।", eng:"The train from Delhi to Agra was looted.", answers:["से","को","में"], explanation:"दिल्ली से (from Delhi), आगरा को (to Agra), ट्रेन में (in train)." },
{ text:"दुकानदार ______ एक पाँच रुपए नोट निकाला और श्रुति ______ दे दिया।", eng:"The shopkeeper took out a note and gave it to Shruti.", answers:["ने","को"], explanation:"दुकानदार ने (doer), श्रुति को (to Shruti)." },
{ text:"राम ______  राज______ पढ़ाई अच्छी होती है।", eng:"raj's study is better than ram .", answers:["से","की"], explanation:"ram से  (comparison), राज की (raj's study)." },
{ text:"जीव-जन्तुओं ______ दया करना हर व्यक्ति ______ धर्म है।", eng:"Kindness to animals is everyone’s duty.", answers:["पर","का"], explanation:"जीव-जन्तुओं पर (towards animals), व्यक्ति का धर्म (person’s duty)." },
{ text:"नर्स ______ मरीज ______ दिल ______ सेवा की।", eng:"The nurse served the patient wholeheartedly.", answers:["ने","की","से"], explanation:"नर्स ने (doer), मरीज की सेवा (patient’s service), दिल से (wholeheartedly)." },
{ text:"ईश्वर ______ कृपा ______ मेरी माँ जल्दी ठीक हो गई।", eng:"By God's grace, my mother recovered quickly.", answers:["की","से"], explanation:"ईश्वर की कृपा (God’s grace), कृपा से (because of grace)." },
{ text:"सब्जियों ______ धोकर खाने ______ रोग नहीं होते।", eng:"Diseases don’t occur after washing vegetables before eating.", answers:["को","से"], explanation:"सब्जियों को धोकर (wash vegetables), खाने से (by eating)." },
{ text:"लाल बाग ______ फूलों ______ सुंदरता देखते ही बनती है।", eng:"The beauty of Lal Bagh’s flowers is worth seeing.", answers:["के","की"], explanation:"लाल बाग के फूल (flowers of Lal Bagh), फूलों की सुंदरता (beauty of flowers)." },
{ text:"मेरे मित्र ______ कुत्ता घर ______ भाग जंगल ______ छिप गया।", eng:"My friend’s dog ran from the house and hid in the jungle.", answers:["का","से","में"], explanation:"मित्र का कुत्ता (friend’s dog), घर से (from house), जंगल में (in jungle)." },
{ text:"लीला ______ शीला ______ उसकी घड़ी वापस दे दी।", eng:"Leela returned Sheela’s watch.", answers:["ने","को"], explanation:"लीला ने (doer), शीला को (to Sheela)." },
{ text:"बच्चों ______ आग ______ नहीं खेलना चाहिए।", eng:"Children should not play with fire.", answers:["को","से"], explanation:"बच्चों को (children should), आग से (with fire)." },
{ text:"लक्ष्मीबाई ______ युद्ध ______ अंग्रेजों के दाँत खट्टे कर दिए।", eng:"Laxmibai defeated the British in war.", answers:["ने","में"], explanation:"लक्ष्मीबाई ने (doer), युद्ध में (in war)." },
{ text:"हमारी गर्मी ______ छुट्टियाँ अप्रैल ______ शुरू होंगी और स्कूल जून ______ खुलेंगे।", eng:"Our summer holidays start in April and school reopens in June.", answers:["की","से","में"], explanation:"गर्मी की छुट्टियाँ (summer holidays), अप्रैल से (from April), जून में (in June)." },
{ text:"______ भगवान, यह तुमने क्या किया?", eng:"Oh God, what have you done?", answers:["हे"], explanation:"हे भगवान (Oh God) - संबोधन कारक." },
{ text:"______, मेरे पैसे बटुए ______ कैसे निकल गए?", eng:"Oh, how did my money slip out of my wallet?", answers:["अरे","से"], explanation:"अरे (Oh), बटुए से (from wallet)." },
{ text:"_____, इतनी बढ़िया खबर सुनकर तुमने मेरा दिल खुश कर दिया।", eng:"Wow, hearing such good news made me happy.", answers:["वाह"], explanation:"वाह (Wow) - संबोधन कारक." }
];

function selectMode(mode){
  document.getElementById("modeSelect").style.display="none";
  if(mode==='teacher'){
    document.getElementById("passwordDiv").style.display='block';
  } else {
    teacherMode=false;
    document.getElementById("quizDiv").style.display='block';
    loadQuiz();
  }
}

function checkPassword(){
  const pwd=document.getElementById("passwordInput").value;
  teacherMode=(pwd==="teacher123");
  document.getElementById("passwordDiv").style.display='none';
  document.getElementById("quizDiv").style.display='block';
  loadQuiz();
  if(teacherMode){ autoTest(); }
}

function shuffle(array){
  for(let i=array.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [array[i],array[j]]=[array[j],array[i]];
  }
}

function loadQuiz(){
  shuffle(questions);
  const quizDiv=document.getElementById("quiz");
  quizDiv.innerHTML="";
  questions.forEach((q,i)=>{
    let parts=q.text.split("______");
    let html=`<p><b>${i+1}.</b> `;
    parts.forEach((part,idx)=>{
      html+=part;
      if(idx<q.answers.length){
        html+=` <select id="q${i}_${idx}"><option value="">-- चुनें --</option>${options.map(o=>`<option value="${o}">${o}</option>`).join("")}</select>`;
      }
    });
    html+="</p><p style='color:#555'>("+q.eng+")</p>";
    let div=document.createElement("div");
    div.className="question";
    div.innerHTML=html;
    quizDiv.appendChild(div);
  });
  document.getElementById("scoreBoard").innerText="आपका स्कोर यहाँ दिखेगा";
  document.getElementById("result").style.display="none";
}

function submitQuiz(){
  let score=0, report="";
  questions.forEach((q,i)=>{
    let userAns=[], allCorrect=true;
    q.answers.forEach((ans,idx)=>{
      let val=document.getElementById(`q${i}_${idx}`).value||"कोई नहीं";
      userAns.push(val);
      if(val!==ans) allCorrect=false;
    });
    if(allCorrect) score++;
    report+=`${i+1}. ${q.text}\nYour Answer: ${userAns.join(", ")}\nCorrect: ${q.answers.join(", ")}\nExplanation: ${q.explanation}\n\n`;
  });
  document.getElementById("scoreBoard").innerText="आपका स्कोर: "+score+"/"+questions.length;
  let resultDiv=document.getElementById("result");
  resultDiv.style.display="block";
  resultDiv.textContent="Report:\n\n"+report;
  launchEmojis(score);
}

function autoTest(){
  questions.forEach((q,i)=>{
    q.answers.forEach((ans,idx)=>{
      document.getElementById(`q${i}_${idx}`).value=ans;
    });
  });
  submitQuiz();
}

function launchEmojis(score){
  let type="star";
  if(score<10) type="angry";
  else if(score<=15) type="clap";
  for(let i=0;i<60;i++){
    let e=document.createElement("div");
    e.className=type;
    e.textContent=(type==="star"?"⭐":type==="clap"?"👏":"😡");
    e.style.left=Math.random()*100+"vw";
    e.style.top=Math.random()*100+"vh";
    e.style.setProperty("--x",(Math.random()*400-200)+"px");
    e.style.setProperty("--y",(Math.random()*-400)+"px");
    document.body.appendChild(e);
    setTimeout(()=>e.remove(),15000);
  }
}

function sendEmail(){
  let content=document.getElementById("result").textContent;
  let subject="Quiz Score & Report";
  let body=encodeURIComponent(content);
  window.location.href=`mailto:malini22venugopal@gmail.com?subject=${subject}&body=${body}`;
}
</script>
</body>
</html>
